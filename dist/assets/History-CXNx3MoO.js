import{u as k,r as o,i as A,o as C,c as a,b as t,F as c,q as D,d as E,y as u,a as r,n as H,t as M}from"./index-DE0sq3M8.js";const T={class:"px-4 py-6"},j={class:"flex gap-4 mb-6 border-b border-gray-800"},q=["onClick"],B={key:0,class:"w-full h-[80vh] flex flex-col gap-2 justify-center items-center text-gray-400"},S={key:0,class:"w-full h-[80vh] text-gray-400"},L={__name:"History",setup($){const b=k(),i=o("deposits"),p=o([]),f=o([]),v=o([]),d=o(!0),m=[{id:"deposits",label:"Deposits"},{id:"withdrawals",label:"Withdrawals"},{id:"trades",label:"Trades"}],w=A(()=>{switch(i.value){case"deposits":return p.value.length>0;case"withdrawals":return f.value.length>0;case"trades":return v.value.length>0;default:return!1}}),x=async()=>{var e;d.value=!0;const l=(e=b.user)==null?void 0:e.id;try{const{data:s,error:n}=await u.from("deposits").select("*").eq("user_id",l).order("date",{ascending:!1});if(n)throw n;p.value=s;const{data:g,error:y}=await u.from("withdrawals").select("*").eq("user_id",l).order("date",{ascending:!1});if(y)throw y;f.value=g;const{data:_,error:h}=await u.from("trades").select("*").eq("user_id",l).order("date",{ascending:!1});if(h)throw h;v.value=_}catch(s){console.error("Error fetching history:",s)}finally{d.value=!1}};return C(()=>{x()}),(l,e)=>(r(),a("div",T,[e[2]||(e[2]=t("div",{class:"flex items-center gap-4 mb-6"},[t("h1",{class:"text-2xl font-semibold"},"History")],-1)),t("div",j,[(r(),a(c,null,D(m,s=>t("button",{key:s.id,onClick:n=>i.value=s.id,class:H(["pb-2 px-4",i.value===s.id?"text-purple-500 border-b-2 border-purple-500":"text-gray-400"])},M(s.label),11,q)),64))]),d.value?(r(),a("div",B,e[0]||(e[0]=[t("svg",{class:"animate-spin h-8 w-8 text-purple-500",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),t("p",{class:"font-semibold"},"Loading...",-1)]))):(r(),a(c,{key:1},[w.value?(r(),a(c,{key:1},[],64)):(r(),a("div",S,e[1]||(e[1]=[E('<div class="p-4 shadow-md"><div class=""><div class="flex justify-between py-3 border-b"><span class="text-gray-600">Time: 2025-02-13 12:30 PM</span><span class="font-semibold text-green-600">Amount: $100.00</span></div><div class="flex justify-between py-3 border-b"><span class="text-gray-600">Time: 2025-02-12 9:00 AM</span><span class="font-semibold text-green-600">Amount: $250.00</span></div><div class="flex justify-between py-3 border-b"><span class="text-gray-600">Time: 2025-02-11 5:45 PM</span><span class="font-semibold text-green-600">Amount: $50.00</span></div></div></div>',1)])))],64))]))}};export{L as default};
