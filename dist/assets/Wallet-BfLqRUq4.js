import{a as x,c as b,b as e,r as u,n as C,t as m,B as F,C as D,D as S,x as f,y as g,l as v,u as _,o as E,k as y,H as h,I as q}from"./index-DE0sq3M8.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N={},R={class:"flex justify-between items-center mb-6"};function W(d,a){return x(),b("div",R,a[0]||(a[0]=[e("h1",{class:"text-2xl font-bold text-white"},"My Assets",-1)]))}const j=M(N,[["render",W]]),B={class:"mb-8"},T={class:"flex items-center gap-2 mb-2 text-gray-400"},I={class:"flex items-baseline gap-2"},O={class:"text-2xl font-bold"},L={class:"text-sm text-gray-400 mt-2"},U={__name:"AssetBalance",props:{amount:{type:[Number,String],required:!0},btcAmount:{type:[Number,String],required:!0}},setup(d){const a=u(!0),i=()=>{a.value=!a.value};return(r,l)=>(x(),b("div",B,[e("div",T,[l[0]||(l[0]=e("span",null,"Total Assets",-1)),e("button",{onClick:i,class:"text-gray-400 hover:text-white"},[e("i",{class:C([a.value?"bi-eye":"bi-eye-slash","text-lg"])},null,2)])]),e("div",I,[l[1]||(l[1]=e("span",{class:"text-xl text-gray-400"},"$",-1)),e("h2",O,m(a.value?d.amount:"****"),1)]),e("p",L," ≈ "+m(a.value?d.btcAmount:"****")+" NGN ",1)]))}},V={key:0,class:"fixed inset-0 bg-black/80 flex items-center justify-center z-50"},H={class:"bg-[#1A1A1A] rounded-lg w-full max-w-md p-6 relative"},P=["placeholder"],z={key:0,class:"text-sm text-gray-400 mt-1"},G={key:0,class:"text-red-500 text-sm"},J=["disabled"],K=1600,w=40,Q={__name:"DepositModal",props:{isOpen:{type:Boolean,required:!0}},emits:["close","success"],setup(d,{emit:a}){const i=a,r=u(""),l=u(""),o=u(!1),p=async()=>{l.value="",o.value=!0;const c=parseFloat(r.value);if(c<w){l.value=`Minimum deposit amount is $${w}`,o.value=!1;return}try{const{data:{user:s}}=await g.auth.getUser(),{error:t}=await g.from("transactions").insert([{user_id:s.id,type:"deposit",amount:c,status:"pending"}]);if(t)throw t;v.success("Deposit request submitted"),i("success"),i("close")}catch(s){l.value=s.message,v.error("Failed to submit deposit request")}finally{o.value=!1}};return(c,s)=>d.isOpen?(x(),b("div",V,[e("div",H,[e("button",{onClick:s[0]||(s[0]=t=>c.$emit("close")),class:"absolute right-4 top-4 text-gray-400 hover:text-white"},s[2]||(s[2]=[e("i",{class:"bi-x text-2xl"},null,-1)])),s[4]||(s[4]=e("h2",{class:"text-xl font-bold mb-4"},"Deposit Funds",-1)),e("form",{onSubmit:F(p,["prevent"]),class:"space-y-4"},[e("div",null,[s[3]||(s[3]=e("label",{class:"block text-sm font-medium text-gray-400 mb-1"}," Amount (USD) ",-1)),D(e("input",{type:"number","onUpdate:modelValue":s[1]||(s[1]=t=>r.value=t),class:"w-full bg-[#2A2A2A] rounded-lg px-4 py-2 text-white",placeholder:`Minimum $${w}`,min:w,required:""},null,8,P),[[S,r.value]]),r.value?(x(),b("p",z," ≈ ₦"+m((r.value*K).toLocaleString()),1)):f("",!0)]),l.value?(x(),b("div",G,m(l.value),1)):f("",!0),e("button",{type:"submit",disabled:o.value,class:"w-full bg-[#7F3DFF] text-white py-2 rounded-lg hover:bg-[#6F2FEF] disabled:opacity-50"},m(o.value?"Processing...":"Submit Deposit Request"),9,J)],32)])])):f("",!0)}},X={key:0,class:"fixed inset-0 bg-black/80 flex items-center justify-center z-50"},Y={class:"bg-[#1A1A1A] rounded-lg w-full max-w-md p-6 relative"},Z=["placeholder","max"],tt={key:0,class:"text-sm text-gray-400 mt-1"},et={key:0,class:"text-red-500 text-sm"},st=["disabled"],lt=1600,$=10,ot={__name:"WithdrawModal",props:{isOpen:{type:Boolean,required:!0},balance:{type:Number,required:!0}},emits:["close","success"],setup(d,{emit:a}){const i=d,r=a,l=u(""),o=u(""),p=u(!1),c=async()=>{o.value="",p.value=!0;const s=parseFloat(l.value);if(s<$){o.value=`Minimum withdrawal amount is $${$}`,p.value=!1;return}if(s>i.balance){o.value="Insufficient balance",p.value=!1;return}try{const{data:{user:t}}=await g.auth.getUser(),{error:n}=await g.from("transactions").insert([{user_id:t.id,type:"withdrawal",amount:s,status:"pending"}]);if(n)throw n;v.success("Withdrawal request submitted"),r("success"),r("close")}catch(t){o.value=t.message,v.error("Failed to submit withdrawal request")}finally{p.value=!1}};return(s,t)=>d.isOpen?(x(),b("div",X,[e("div",Y,[e("button",{onClick:t[0]||(t[0]=n=>s.$emit("close")),class:"absolute right-4 top-4 text-gray-400 hover:text-white"},t[2]||(t[2]=[e("i",{class:"bi-x text-2xl"},null,-1)])),t[4]||(t[4]=e("h2",{class:"text-xl font-bold mb-4"},"Withdraw Funds",-1)),e("form",{onSubmit:F(c,["prevent"]),class:"space-y-4"},[e("div",null,[t[3]||(t[3]=e("label",{class:"block text-sm font-medium text-gray-400 mb-1"}," Amount (USD) ",-1)),D(e("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=n=>l.value=n),class:"w-full bg-[#2A2A2A] rounded-lg px-4 py-2 text-white",placeholder:`Minimum $${$}`,min:$,max:d.balance,required:""},null,8,Z),[[S,l.value]]),l.value?(x(),b("p",tt," ≈ ₦"+m((l.value*lt).toLocaleString()),1)):f("",!0)]),o.value?(x(),b("div",et,m(o.value),1)):f("",!0),e("button",{type:"submit",disabled:p.value,class:"w-full bg-[#7F3DFF] text-white py-2 rounded-lg hover:bg-[#6F2FEF] disabled:opacity-50"},m(p.value?"Processing...":"Submit Withdrawal Request"),9,st)],32)])])):f("",!0)}},at={class:"px-4 py-6 w-full"},nt={class:"flex justify-start md:justify-start gap-[16px] top-[-15px] relative bottom-[60px] items-center"},rt={class:"items-center"},it={class:"opacity-[0.7] text-white"},ut={class:"flex flex-col gap-2"},dt={class:"relative bottom-[80px] bg-[#1E1E1E] text-white font-semibold flex rounded-[20px] flex-col gap-[6px] justify-start items-center"},pt={class:"text-sm max-sm:text-[13px]"},xt={__name:"Wallet",setup(d){q();const a=_(),i=u(0),r=u(!1),l=u(!1),o=u("");E(async()=>{var n,A,k;(A=(n=a.user)==null?void 0:n.user_metadata)!=null&&A.username?o.value=`https://vivstock.com/${a.user.user_metadata.username}`:o.value="https://vivstock.com/user";const{data:s,error:t}=await g.from("profiles").select("balance").eq("id",(k=a.user)==null?void 0:k.id).single();t?console.error("Error fetching balance:",t):i.value=s.balance||0});const p=async()=>{try{await navigator.clipboard.writeText(o.value),v.success("Referral link copied to clipboard")}catch{v.error("Failed to copy referral link")}},c=()=>{E()};return(s,t)=>(x(),b("div",at,[y(j),y(U,{amount:i.value,"btc-amount":i.value*1e3},null,8,["amount","btc-amount"]),e("div",nt,[e("button",{onClick:t[0]||(t[0]=n=>r.value=!0),class:"bg-[#1E1E1E] w-[120px] text-white py-2 px-2 rounded-[10px] font-medium flex items-center gap-2"},t[8]||(t[8]=[e("img",{src:"",alt:"Deposit",class:"w-5 h-5"},null,-1),e("p",null,"Deposit",-1)])),e("button",{onClick:t[1]||(t[1]=n=>l.value=!0),class:"bg-[#1E1E1E] w-[125px] text-white py-2 px-2 rounded-[10px] flex font-medium gap-[4px] items-center"},t[9]||(t[9]=[e("img",{src:"",alt:"Withdraw",class:"w-5 h-5"},null,-1),e("p",null,"Withdraw",-1)])),e("button",{class:"bg-[#1E1E1E] w-[120px] text-white py-2 px-2 rounded-[10px] font-medium flex items-center gap-2",onClick:t[2]||(t[2]=n=>s.$router.push("/history"))},t[10]||(t[10]=[e("img",{src:"",alt:"History",class:"w-6 h-6"},null,-1),e("p",null,"History",-1)]))]),t[17]||(t[17]=e("div",{class:"border-b-[1px] border-[#636262] w-screen relative mt-[40px] -left-4 top-[-50px]"},null,-1)),t[18]||(t[18]=e("h1",{class:"relative bottom-[40px] text-2xl font-bold"},"Account",-1)),e("div",{class:"bg-[#1E1E1E] text-white py-2 px-4 rounded-[20px] h-[80px] font-semibold flex justify-between gap-[30px] mt-8 -top-[60px] relative my-[60px] text-center items-center align-middle",onClick:t[3]||(t[3]=n=>s.$router.push("/fixed"))},[e("div",rt,[t[11]||(t[11]=e("span",{class:"opacity-[0.3] font-normal flex items-center"},[e("i",{class:"bi-lock text-[#bc14ff] mr-2 text-xl"}),h(" Fixed ")],-1)),e("span",it,"$"+m(i.value.toFixed(2)),1)]),t[12]||(t[12]=e("div",{class:"text-center opacity-[0.3]"},[e("i",{class:"bi-arrow-right text-xl"})],-1))]),e("div",{class:"bg-[#1E1E1E] px-4 rounded-[20px] h-[100px] font-semibold flex justify-between gap-[30px] mt-8 -top-[60px] relative my-[60px] items-center",onClick:t[5]||(t[5]=n=>s.$router.push("/referals"))},[e("div",ut,[t[13]||(t[13]=e("h1",{class:"relative bottom-0 left-[-15px] top-[-50px] mb-[0px] p-[0px] text-2xl font-bold"},"Private Commission",-1)),t[14]||(t[14]=e("p",{class:"w-full h-[31px] text-[#DADADA] text-[16px] font-semibold relative -top-[25px] leading-[1.1]"},[h(" Earn $200 for refering 15 "),e("br"),h(" friends . ")],-1)),e("p",{class:"text-purple-500 relative top-[-25px] pl-[-10px]",onClick:t[4]||(t[4]=n=>s.$router.push("/referals"))},"Refer Now")]),t[15]||(t[15]=e("img",{src:"",alt:"referal "},null,-1))]),t[19]||(t[19]=e("h1",{class:"relative bottom-[90px] text-2xl font-bold"},"Referral Link",-1)),e("div",dt,[e("div",{class:"rounded-[20px] w-full px-4 h-[80px] py-2 bg-[#000] flex items-center justify-center group cursor-pointer hover:bg-gray-900 transition-colors",onClick:p},[e("span",pt,m(o.value),1),t[16]||(t[16]=e("span",{class:"opacity-0 group-hover:opacity-100 transition-opacity"},[e("i",{class:"bi-clipboard text-sm"})],-1))])]),y(Q,{"is-open":r.value,onClose:t[6]||(t[6]=n=>r.value=!1),onSuccess:c},null,8,["is-open"]),y(ot,{"is-open":l.value,onClose:t[7]||(t[7]=n=>l.value=!1),onSuccess:c,balance:i.value},null,8,["is-open","balance"])]))}};export{xt as default};
