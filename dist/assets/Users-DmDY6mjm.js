import{r as b,i as y,o as m,y as x,l as c,c as n,k as v,b as e,t as r,C as w,D as k,F as U,q as C,a as d,n as A}from"./index-DE0sq3M8.js";import{_ as F}from"./AdminNav-dYmzuoiQ.js";const $={class:"min-h-screen bg-[#111111] text-white"},B={class:"lg:pl-64 p-6"},D={class:"mb-8"},E={class:"text-gray-400"},L={class:"mb-6"},q={class:"relative"},M={class:"overflow-x-auto"},S={class:"w-full bg-[#1A1A1A] rounded-lg"},T={class:"px-6 py-4"},V={class:"flex items-center gap-3"},N={class:"w-10 h-10 bg-[#7F3DFF] rounded-full flex items-center justify-center"},j={class:"px-6 py-4"},z={class:"px-6 py-4"},G={class:"px-6 py-4"},H={class:"px-6 py-4"},J={class:"flex gap-2"},K=["onClick"],O=["onClick"],P=["onClick"],X={__name:"Users",setup(Q){const _=b([]),i=b(""),f=b(0),h=y(()=>_.value.filter(l=>{var s,t;return((s=l.username)==null?void 0:s.toLowerCase().includes(i.value.toLowerCase()))||((t=l.email)==null?void 0:t.toLowerCase().includes(i.value.toLowerCase()))}));m(async()=>{await u()});const u=async()=>{try{const{data:l,error:s,count:t}=await x.from("profiles").select("*",{count:"exact"});if(s)throw s;_.value=l||[],f.value=t}catch(l){console.error("Error fetching users:",l),c.error("Failed to load users")}},p=async(l,s)=>{try{let t={};switch(s){case"ban":t={is_banned:!0};break;case"unban":t={is_banned:!1};break;case"delete":const{error:o}=await x.from("profiles").delete().eq("id",l);if(o)throw o;c.success("User deleted successfully"),await u();return}const{error:a}=await x.from("profiles").update(t).eq("id",l);if(a)throw a;c.success(`User ${s}ned successfully`),await u()}catch(t){console.error(`Error ${s}ing user:`,t),c.error(`Failed to ${s} user`)}};return(l,s)=>(d(),n("div",$,[v(F),e("div",B,[e("div",D,[s[1]||(s[1]=e("h1",{class:"text-2xl font-bold mb-2"},"Users Management",-1)),e("p",E,"Total Users: "+r(f.value),1)]),e("div",L,[e("div",q,[w(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=t=>i.value=t),placeholder:"Search users...",class:"w-full bg-[#1A1A1A] px-4 py-2 pl-10 rounded-lg"},null,512),[[k,i.value]]),s[2]||(s[2]=e("i",{class:"bi-search absolute left-3 top-3 text-gray-400"},null,-1))])]),e("div",M,[e("table",S,[s[6]||(s[6]=e("thead",null,[e("tr",{class:"border-b border-gray-700"},[e("th",{class:"px-6 py-3 text-left"},"User"),e("th",{class:"px-6 py-3 text-left"},"Email"),e("th",{class:"px-6 py-3 text-left"},"Status"),e("th",{class:"px-6 py-3 text-left"},"Balance"),e("th",{class:"px-6 py-3 text-left"},"Actions")])],-1)),e("tbody",null,[(d(!0),n(U,null,C(h.value,t=>{var a,o;return d(),n("tr",{key:t.id,class:"border-b border-gray-700"},[e("td",T,[e("div",V,[e("div",N,r((a=t.username)==null?void 0:a.charAt(0).toUpperCase()),1),e("span",null,r(t.username),1)])]),e("td",j,r(t.email),1),e("td",z,[e("span",{class:A(["px-2 py-1 rounded-full text-sm",t.is_banned?"bg-red-500/20 text-red-500":"bg-green-500/20 text-green-500"])},r(t.is_banned?"Banned":"Active"),3)]),e("td",G,"$"+r((o=t.balance)==null?void 0:o.toFixed(2)),1),e("td",H,[e("div",J,[t.is_banned?(d(),n("button",{key:0,onClick:g=>p(t.id,"unban"),class:"p-2 bg-green-500/20 text-green-500 rounded-lg hover:bg-green-500/30",title:"Unban User"},s[3]||(s[3]=[e("i",{class:"bi-check text-lg"},null,-1)]),8,K)):(d(),n("button",{key:1,onClick:g=>p(t.id,"ban"),class:"p-2 bg-red-500/20 text-red-500 rounded-lg hover:bg-red-500/30",title:"Ban User"},s[4]||(s[4]=[e("i",{class:"bi-ban text-lg"},null,-1)]),8,O)),e("button",{onClick:g=>p(t.id,"delete"),class:"p-2 bg-red-500/20 text-red-500 rounded-lg hover:bg-red-500/30",title:"Delete User"},s[5]||(s[5]=[e("i",{class:"bi-trash text-lg"},null,-1)]),8,P)])])])}),128))])])])])]))}};export{X as default};
